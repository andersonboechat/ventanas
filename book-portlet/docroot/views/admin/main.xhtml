<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<f:view
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head />
<h:body>
	<f:loadBundle basename="Language_pt_BR" var="msg"/>
	
	<h:panelGrid columns="2">
		<h:column id="column1">
			<p:panelGrid columns="2">
				<p:column>
					<p:outputText value="#{bookAdmin.occurrence.type.label} - #{bookAdmin.occurrence.code}"/>
					<c:if test="#{bookAdmin.occurrence.user}">
					<br/><p:outputText value="#{bookAdmin.occurrence.user.fullName}"/>
					</c:if>
				</p:column>
				<p:column>
					<h:outputText value="#{occurrence.date}" styleClass="record-time" rendered="true">
						<f:convertDateTime pattern="'registrada em' dd 'de' MMMM 'de' yyyy 'às' HH:mm" />
					</h:outputText>
				</p:column>
			</p:panelGrid>
			<p:outputPanel id="occurrenceText" layout="block" styleClass="textarea">#{bookAdmin.occurrence.text}</p:outputPanel>
			<p:separator></p:separator>
			<p:inputTextarea id="answerText" requiredMessage="O texto da resposta não foi informado" 
							counter="remaining-chars" counterTemplate="#{msg['text.counter']} {0}" 
							maxlength="1000"
							styleClass="textarea" 
							value="#{bookAdmin.text}" style="display:inline; float: none;"/>
			<h:outputLabel id="remaining-chars"/>
		</h:column>
		<h:column>
			<p:dataTable widgetVar="thebook" id="book" var="occurrence" value="#{bookAdmin.occurrences}" rows="10" 
				paginator="true" paginatorPosition="top" emptyMessage="#{msg['book.empty']}" styleClass="complaint-book"
				selectionMode="single">
				<p:panelGrid columns="2">
					<p:column>#{occurrence.type.label} #{occurrence.code}</p:column>
					<p:column>
						<h:outputText value="#{occurrence.date}" styleClass="record-time">
							<f:convertDateTime pattern="'registrada em' dd 'de' MMMM 'de' yyyy 'às' HH:mm" />
						</h:outputText>
					</p:column>
				</p:panelGrid>
				<p:commandLink actionListener="onSelect" value="#{occurrence.text}" update="column1"/>
			</p:dataTable>
		</h:column>
	</h:panelGrid>
</h:body>
</f:view>